# üõ°Ô∏è –°–ò–°–¢–ï–ú–ê –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê DELIVERY APP

## üìã –£–°–¢–ê–ù–û–í–õ–ï–ù–ù–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´

### ‚úÖ **1. –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –ú–û–ù–ò–¢–û–†–ò–ù–ì**
- **–§–∞–π–ª**: `check-server.sh`
- **–§—É–Ω–∫—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- **Cron**: `*/5 * * * * /home/enclude/delivery-app/check-server.sh`
- **–õ–æ–≥**: `/var/log/delivery-app-monitor.log`

### ‚úÖ **2. –†–ê–°–®–ò–†–ï–ù–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê**
- **–§–∞–π–ª**: `health-check.sh`
- **–§—É–Ω–∫—Ü–∏—è**: –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã
- **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç**: –ü—Ä–æ—Ü–µ—Å—Å—ã, –ø–æ—Ä—Ç—ã, endpoints, –ë–î, –ª–æ–≥–∏, —Ä–µ—Å—É—Ä—Å—ã, SSL
- **–õ–æ–≥**: `/var/log/delivery-app-health.log`

### ‚úÖ **3. –£–ü–†–ê–í–õ–ï–ù–ò–ï –°–ï–†–í–ï–†–û–ú**
- **–§–∞–π–ª**: `manage-server.sh`
- **–§—É–Ω–∫—Ü–∏—è**: –£–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–º —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã
- **–ö–æ–º–∞–Ω–¥—ã**: start, stop, restart, status, logs, health

### ‚úÖ **4. –†–û–¢–ê–¶–ò–Ø –õ–û–ì–û–í**
- **–§–∞–π–ª**: `/etc/logrotate.d/delivery-app`
- **–§—É–Ω–∫—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è –∏ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**: –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –∏–ª–∏ –ø–æ 50MB, —Ö—Ä–∞–Ω–µ–Ω–∏–µ 30 –¥–Ω–µ–π

### ‚úÖ **5. –£–õ–£–ß–®–ï–ù–ù–´–ô SYSTEMD –°–ï–†–í–ò–°**
- **–§–∞–π–ª**: `delivery-app-improved.service`
- **–§—É–Ω–∫—Ü–∏—è**: –ù–∞–¥–µ–∂–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º
- **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –ª–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤, graceful shutdown

## üöÄ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï

### **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–º:**
```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å
./manage-server.sh status

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
./manage-server.sh start

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
./manage-server.sh stop

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
./manage-server.sh restart

# –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫)
./manage-server.sh logs

# –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫)
./manage-server.sh logs 100

# –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
./manage-server.sh health
```

### **–†—É—á–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
# –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
./health-check.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
./check-server.sh
```

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤:**
```bash
# –õ–æ–≥ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
tail -f /var/log/delivery-app-monitor.log

# –õ–æ–≥ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
tail -f /var/log/delivery-app-health.log

# –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
tail -f /home/enclude/delivery-app/server.log
```

## üîß –ù–ê–°–¢–†–û–ô–ö–ò

### **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** (–≤ `check-server.sh`):
- `MAX_RESTARTS=5` - –ú–∞–∫—Å–∏–º—É–º –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤ –ø–æ–¥—Ä—è–¥
- –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏: 5 –º–∏–Ω—É—Ç (cron)
- Timeout –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞: 5 —Å–µ–∫—É–Ω–¥

### **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–æ—Ç–∞—Ü–∏–∏ –ª–æ–≥–æ–≤**:
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 50MB
- –ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å: –µ–∂–µ–¥–Ω–µ–≤–Ω–æ
- –•—Ä–∞–Ω–µ–Ω–∏–µ: 30 –¥–Ω–µ–π
- –°–∂–∞—Ç–∏–µ: –≤–∫–ª—é—á–µ–Ω–æ

### **–õ–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤**:
- –ü–∞–º—è—Ç—å: –º–∞–∫—Å–∏–º—É–º 2GB
- –ó–∞–¥–∞—á–∏: –º–∞–∫—Å–∏–º—É–º 200
- –§–∞–π–ª—ã: –º–∞–∫—Å–∏–º—É–º 65536

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å Node.js –∑–∞–ø—É—â–µ–Ω
- ‚úÖ –ü–æ—Ä—Ç—ã 3000 –∏ 3443 –æ—Ç–∫—Ä—ã—Ç—ã
- ‚úÖ HTTP endpoints –æ—Ç–≤–µ—á–∞—é—Ç
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–∞
- ‚úÖ –õ–æ–≥–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è
- ‚úÖ –†–µ—Å—É—Ä—Å—ã –≤ –Ω–æ—Ä–º–µ

### **–ê–ª–µ—Ä—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π
- –°—á–µ—Ç—á–∏–∫ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤
- –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –°–ò–¢–£–ê–¶–ò–ò

### **–ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `./manage-server.sh logs`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É: `./health-check.sh`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç—ã: `netstat -tlnp | grep -E ':3000|:3443'`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å—ã: `ps aux | grep node`

### **–ï—Å–ª–∏ –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `/var/log/delivery-app-monitor.log`
2. –°–±—Ä–æ—Å—å—Ç–µ —Å—á–µ—Ç—á–∏–∫: `echo "0" > /tmp/delivery-app-restart-count`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Ä—É—á–Ω—É—é: `./manage-server.sh start`

### **–≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫:**
```bash
# –£–±–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã Node.js
pkill -9 -f "node server.js"

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
./manage-server.sh start
```

## üìà –°–¢–ê–¢–ò–°–¢–ò–ö–ê

### **–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã:**
- ‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –í—Å–µ –ø–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã
- ‚úÖ Health checks –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–µ–Ω
- ‚úÖ –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞

### **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ü–∞–º—è—Ç—å: ~77MB
- CPU: ~0.4%
- –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: —Å—Ç–∞–±–∏–ª—å–Ω–æ
- –û—à–∏–±–∫–∏: –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç

## üîÆ –î–ê–õ–¨–ù–ï–ô–®–ò–ï –£–õ–£–ß–®–ï–ù–ò–Ø

1. **Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
2. **–ú–µ—Ç—Ä–∏–∫–∏ Prometheus** –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
3. **Backup –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π** –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
4. **Load balancer** –¥–ª—è –≤—ã—Å–æ–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
5. **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è** –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-07-12  
**–í–µ—Ä—Å–∏—è**: 1.0  
**–°—Ç–∞—Ç—É—Å**: –ê–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ 