# üõ°Ô∏è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Delivery App

## üîë **–ì–ê–†–ê–ù–¢–ò–Ø SSH –î–û–°–¢–£–ü–ê**

### ‚ö†Ô∏è **–í–ê–ñ–ù–û: –í–∞—à SSH –¥–æ—Å—Ç—É–ø –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω!**

–í–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: `ssh -l enclude 89.169.182.9`
- ‚úÖ **–ü–æ—Ä—Ç 22 (SSH)** - –±—É–¥–µ—Ç –†–ê–ó–†–ï–®–ï–ù –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ
- ‚úÖ **IP 89.169.182.9** - –≤–∞—à —Å–µ—Ä–≤–µ—Ä
- ‚úÖ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å enclude** - –≤–∞—à –ª–æ–≥–∏–Ω

**–§–∞–π—Ä–≤–æ–ª –ù–ï –∑–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç –≤–∞—à SSH!** –ú—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Ä–∞–∑—Ä–µ—à–∞–µ–º –ø–æ—Ä—Ç 22.

---

## üî• **1. –§–ê–ô–†–í–û–õ UFW - –ü–û–®–ê–ì–û–í–ê–Ø –ù–ê–°–¢–†–û–ô–ö–ê**

### –ß—Ç–æ –±—É–¥–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–æ:
```bash
‚úÖ SSH (–ø–æ—Ä—Ç 22)         - –¥–ª—è –≤–∞—à–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞
‚úÖ HTTP (–ø–æ—Ä—Ç 3000)      - –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è  
‚úÖ HTTPS (–ø–æ—Ä—Ç 3443)     - –¥–ª—è HTTPS –≤–µ—Ä—Å–∏–∏
‚úÖ ICMP (ping)           - –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
```

### –ß—Ç–æ –±—É–¥–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ:
```bash
üö´ –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã
üö´ Telnet (23), RPC (135), NetBIOS (139), SMB (445)
üö´ MySQL (3306), PostgreSQL (5432), SQL Server (1433)
```

### üìã **–ê–ª–≥–æ—Ä–∏—Ç–º –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:**

1. **–°–Ω–∞—á–∞–ª–∞ —Ä–∞–∑—Ä–µ—à–∞–µ–º SSH** (—Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ!)
2. **–¢–æ–ª—å–∫–æ –ø–æ—Ç–æ–º –≤–∫–ª—é—á–∞–µ–º —Ñ–∞–π—Ä–≤–æ–ª**
3. **–ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å**

---

## üöÄ **2. –ó–ê–ü–£–°–ö –§–ê–ô–†–í–û–õ–ê**

### –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞:
```bash
./setup-firewall.sh
```

### –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –ø–æ —à–∞–≥–∞–º:
```bash
1. üîÑ –°–±—Ä–æ—Å —Å—Ç–∞—Ä—ã—Ö –ø—Ä–∞–≤–∏–ª UFW
2. üõ°Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–ª–∏—Ç–∏–∫–∏: –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –≤—Å–µ –≤—Ö–æ–¥—è—â–∏–µ
3. üîë –†–ê–ó–†–ï–®–ï–ù–ò–ï SSH (–ø–æ—Ä—Ç 22) - –ü–ï–†–í–´–ú –î–ï–õ–û–ú!
4. üåê –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ HTTP/HTTPS –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
5. üö´ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤
6. ‚úÖ –í–∫–ª—é—á–µ–Ω–∏–µ UFW
7. üìä –ü–æ–∫–∞–∑ –∏—Ç–æ–≥–æ–≤—ã—Ö –ø—Ä–∞–≤–∏–ª
```

### –í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º:
```bash
# –ï—Å–ª–∏ –ø–æ—Ç–µ—Ä—è–ª–∏ SSH –¥–æ—Å—Ç—É–ø (–º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ):
# –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –Ø–Ω–¥–µ–∫—Å.–û–±–ª–∞–∫–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
sudo ufw disable
sudo ufw allow 22
sudo ufw enable
```

---

## üö´ **3. FAIL2BAN - –ó–ê–©–ò–¢–ê –û–¢ –ë–†–£–¢–§–û–†–°**

### –ß—Ç–æ –∑–∞—â–∏—â–∞–µ—Ç:
- **SSH –±—Ä—É—Ç—Ñ–æ—Ä—Å** - –±–∞–Ω –Ω–∞ 30 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ 3 –ø–æ–ø—ã—Ç–æ–∫
- **–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å** - –±–∞–Ω –Ω–∞ 24 —á–∞—Å–∞ –ø–æ—Å–ª–µ 3 –ø–æ–ø—ã—Ç–æ–∫  
- **Rate limiting** - –±–∞–Ω –Ω–∞ 2 —á–∞—Å–∞ –ø–æ—Å–ª–µ 10 –ø—Ä–µ–≤—ã—à–µ–Ω–∏–π

### –í–∞—à IP –±—É–¥–µ—Ç –≤ whitelist:
```bash
# –í–∞—à–∏ IP –Ω–µ –±—É–¥—É—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã:
127.0.0.1    (localhost)
::1          (IPv6 localhost)
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Fail2ban:
```bash
# –°—Ç–∞—Ç—É—Å
sudo fail2ban-client status

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä
sudo fail2ban-client status sshd
sudo fail2ban-client status delivery-app

# –†–∞–∑–±–∞–Ω–∏—Ç—å IP (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
sudo fail2ban-client unban 192.168.1.100

# –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ IP
sudo fail2ban-client banned
```

---

## üìä **4. –ú–û–ù–ò–¢–û–†–ò–ù–ì –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò**

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
```bash
# Health check
curl http://localhost:3000/health

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
curl http://localhost:3000/security/stats
```

### –õ–æ–≥–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
```bash
# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
tail -f /home/enclude/delivery-app/logs/security.log

# –õ–æ–≥–∏ Fail2ban
tail -f /var/log/fail2ban.log

# –õ–æ–≥–∏ UFW —Ñ–∞–π—Ä–≤–æ–ª–∞
tail -f /var/log/ufw.log

# SSH –ª–æ–≥–∏
tail -f /var/log/auth.log
```

### –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤:
```bash
# UFW
sudo ufw status numbered

# Fail2ban
sudo fail2ban-client status

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
sudo systemctl status delivery-app
```

---

## üîß **5. –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò**

### –¢–µ—Å—Ç rate limiting:
```bash
# –ú–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–¥—Ä—è–¥ (–¥–æ–ª–∂–µ–Ω –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å)
for i in {1..150}; do curl -s http://localhost:3000/health > /dev/null; done

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É
curl http://localhost:3000/security/stats
```

### –¢–µ—Å—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –±–æ—Ç–æ–≤:
```bash
# –ü–æ–ø—ã—Ç–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–º URL
curl http://localhost:3000/wp-admin/
curl http://localhost:3000/config.php

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 404 –∏ –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å
```

### –¢–µ—Å—Ç —Ñ–∞–π—Ä–≤–æ–ª–∞:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã
nmap -p 1-1000 localhost

# SSH –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç
nmap -p 22 localhost
```

---

## üÜò **6. –≠–ö–°–¢–†–ï–ù–ù–û–ï –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï**

### –ï—Å–ª–∏ –ø–æ—Ç–µ—Ä—è–Ω SSH –¥–æ—Å—Ç—É–ø:

1. **–ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –Ø–Ω–¥–µ–∫—Å.–û–±–ª–∞–∫–∞:**
   ```bash
   sudo ufw disable
   sudo systemctl stop fail2ban
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å SSH —Å–µ—Ä–≤–∏—Å:**
   ```bash
   sudo systemctl status ssh
   sudo systemctl restart ssh
   ```

3. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–∞–π—Ä–≤–æ–ª:**
   ```bash
   sudo ufw allow 22
   sudo ufw enable
   ```

### –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ä–≤–∏—Å
sudo systemctl status delivery-app
sudo journalctl -u delivery-app -f

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
sudo systemctl restart delivery-app

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã
netstat -tlnp | grep :3000
```

### –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```bash
# –û—Ç–∫–ª—é—á–∏—Ç—å –≤—Å–µ –∑–∞—â–∏—Ç—ã
sudo ufw disable
sudo systemctl stop fail2ban
sudo systemctl stop delivery-app

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –æ–±—ã—á–Ω–æ–º —Ä–µ–∂–∏–º–µ
npm start
```

---

## üìà **7. –£–†–û–í–ù–ò –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò**

### üü° **–£—Ä–æ–≤–µ–Ω—å 1 - –ë–∞–∑–æ–≤—ã–π (—Å–µ–π—á–∞—Å)**
- ‚úÖ Rate limiting –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –±–æ—Ç–æ–≤
- ‚úÖ Secure headers
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### üü† **–£—Ä–æ–≤–µ–Ω—å 2 - –§–∞–π—Ä–≤–æ–ª**
```bash
./setup-firewall.sh
```
- ‚úÖ –í—Å–µ –∏–∑ –£—Ä–æ–≤–Ω—è 1
- ‚úÖ UFW —Ñ–∞–π—Ä–≤–æ–ª –∞–∫—Ç–∏–≤–µ–Ω
- ‚úÖ –ó–∞–∫—Ä—ã—Ç—ã –ª–∏—à–Ω–∏–µ –ø–æ—Ä—Ç—ã

### üî¥ **–£—Ä–æ–≤–µ–Ω—å 3 - –ü–æ–ª–Ω–∞—è –∑–∞—â–∏—Ç–∞**
```bash
./setup-server-security.sh
```
- ‚úÖ –í—Å–µ –∏–∑ –£—Ä–æ–≤–Ω—è 2  
- ‚úÖ Fail2ban –∞–∫—Ç–∏–≤–µ–Ω
- ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ –ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

## üéØ **8. –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô**

### –°–µ–π—á–∞—Å –≤—ã–ø–æ–ª–Ω–∏–º:
1. ‚úÖ **–¢–µ—Å—Ç–∏—Ä—É–µ–º SSH** - —É–±–µ–∂–¥–∞–µ–º—Å—è —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. ‚úÖ **–ó–∞–ø—É—Å–∫–∞–µ–º —Ñ–∞–π—Ä–≤–æ–ª** - –±–µ–∑–æ–ø–∞—Å–Ω–æ
3. ‚úÖ **–ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø** - SSH + –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –ü–æ–∑–∂–µ (–ø–æ –∂–µ–ª–∞–Ω–∏—é):
1. üî≤ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Fail2ban
2. üî≤ DDoS –∑–∞—â–∏—Ç–∞ –≤ –Ø–Ω–¥–µ–∫—Å.–û–±–ª–∞–∫–µ  
3. üî≤ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

---

## ‚ö° **9. –ö–û–ú–ê–ù–î–´ –ë–´–°–¢–†–û–ì–û –î–û–°–¢–£–ü–ê**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ SSH —Ä–∞–±–æ—Ç–∞–µ—Ç
ssh -l enclude 89.169.182.9 "echo 'SSH OK'"

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ñ–∞–π—Ä–≤–æ–ª
./setup-firewall.sh

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
sudo ufw status
curl http://89.169.182.9:3000/health

# –í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º
sudo ufw disable  # –æ—Ç–∫–ª—é—á–∏—Ç—å —Ñ–∞–π—Ä–≤–æ–ª
```

---

## üõ°Ô∏è **–ì–ê–†–ê–ù–¢–ò–ò –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò**

- ‚úÖ **SSH –¥–æ—Å—Ç—É–ø —Å–æ—Ö—Ä–∞–Ω–µ–Ω** - –ø–æ—Ä—Ç 22 –≤—Å–µ–≥–¥–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω
- ‚úÖ **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –ø–æ—Ä—Ç—ã 3000/3443 –æ—Ç–∫—Ä—ã—Ç—ã  
- ‚úÖ **–û—Ç–∫–∞—Ç –≤–æ–∑–º–æ–∂–µ–Ω** - –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –≤—Å–µ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
- ‚úÖ **–õ–æ–≥–∏ –≤–µ–¥—É—Ç—Å—è** - –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–∫–ª—é—á–µ–Ω** - –≤–∏–¥–∏–º —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

**–í–∞—à —Å–µ—Ä–≤–µ—Ä —Å—Ç–∞–Ω–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ, –Ω–æ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º!** üöÄ 