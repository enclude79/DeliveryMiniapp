# üéØ –°–†–ê–í–ù–ï–ù–ò–ï –í–ê–†–ò–ê–ù–¢–û–í –†–ê–ó–î–ï–õ–ï–ù–ò–Ø –ö–û–ù–¢–£–†–û–í

## üìä –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –í–∞—Ä–∏–∞–Ω—Ç 1 (Git-Based) | –í–∞—Ä–∏–∞–Ω—Ç 2 (Docker+CI/CD) | –í–∞—Ä–∏–∞–Ω—Ç 3 (Minimal) |
|----------|------------------------|---------------------------|----------------------|
| **‚è±Ô∏è –í—Ä–µ–º—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è** | 30-60 –º–∏–Ω | 2-4 —á–∞—Å–∞ | 15-30 –º–∏–Ω |
| **üéØ –†–∞–∑–º–µ—Ä –∫–æ–º–∞–Ω–¥—ã** | 1-3 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ | 2-5 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ | 1-2 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ |
| **üß™ –ê–≤—Ç–æ—Ç–µ—Å—Ç—ã** | –†—É—á–Ω—ã–µ + –±–∞–∑–æ–≤—ã–µ | –ü–æ–ª–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ | –ü—Ä–æ—Å—Ç—ã–µ —Å–∫—Ä–∏–ø—Ç—ã |
| **üöÄ –î–µ–ø–ª–æ–π** | Git workflow | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π CI/CD | –†—É—á–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã |
| **üê≥ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è** | ‚ùå | ‚úÖ | ‚ùå |
| **üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** | –ë–∞–∑–æ–≤—ã–π | Prometheus+Grafana | –ë–∞–∑–æ–≤—ã–π |
| **üîí –ò–∑–æ–ª—è—Ü–∏—è** | –†–∞–∑–Ω—ã–µ –ë–î/–ø–æ—Ä—Ç—ã | Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã | –†–∞–∑–Ω—ã–µ –ë–î/–ø–æ—Ä—Ç—ã |
| **üõ†Ô∏è –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏** | –ù–∏–∑–∫–∞—è | –°—Ä–µ–¥–Ω—è—è | –û—á–µ–Ω—å –Ω–∏–∑–∫–∞—è |
| **üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∞—è | –ù–∏–∑–∫–∞—è |
| **üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –∏–∑—É—á–µ–Ω–∏—è** | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–∞—è | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è |

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –î–õ–Ø –í–ê–®–ï–ì–û –ü–†–û–ï–ö–¢–ê

### ü•á **–õ–£–ß–®–ò–ô –í–´–ë–û–†: –í–ê–†–ò–ê–ù–¢ 3 (Minimal)**

**–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —ç—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç:**

‚úÖ **–ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–µ–±–æ–ª—å—à–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞**
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
- –ë—ã—Å—Ç—Ä–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞ 15 –º–∏–Ω—É—Ç
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑—É—á–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

‚úÖ **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤–∞—à–∏–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º**
- –î–≤–∞ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç—É—Ä–∞ ‚úÖ
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ ‚úÖ  
- –ü—Ä–æ—Å—Ç–∞—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω ‚úÖ
- –ê–≤—Ç–æ—Ç–µ—Å—Ç—ã (–±–∞–∑–æ–≤—ã–µ, –Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–µ) ‚úÖ

‚úÖ **–ü—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç—å**
- –õ–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
- –ë—ã—Å—Ç—Ä–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–æ–ª–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### ü•à **–í–¢–û–†–û–ô –í–´–ë–û–†: –í–ê–†–ò–ê–ù–¢ 1 (Git-Based)**

–ï—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –∫–æ–º–∞–Ω–¥–∞ –≤—ã—Ä–∞—Å—Ç–µ—Ç –¥–æ 2-3 —á–µ–ª–æ–≤–µ–∫.

### ü•â **–¢–†–ï–¢–ò–ô –í–´–ë–û–†: –í–ê–†–ò–ê–ù–¢ 2 (Docker+CI/CD)**

–¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π —Ä–æ—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∫–æ–º–∞–Ω–¥—ã.

## üöÄ –ü–õ–ê–ù –í–ù–ï–î–†–ï–ù–ò–Ø (–í–ê–†–ò–ê–ù–¢ 3)

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (5 –º–∏–Ω—É—Ç)

```bash
# 1. –°–æ–∑–¥–∞–µ–º backup –ø—Ä–æ–¥–∞–∫—à–Ω–∞
cd /home/enclude
tar -czf delivery-app-backup-$(date +%Y%m%d).tar.gz delivery-app

# 2. –°–æ–∑–¥–∞–µ–º dev –∫–æ–ø–∏—é
cp -r delivery-app delivery-app-dev
```

### –≠—Ç–∞–ø 2: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (10 –º–∏–Ω—É—Ç)

```bash
cd delivery-app-dev

# 1. –°–æ–∑–¥–∞–µ–º dev –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cp .env .env.dev

# 2. –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –ø–æ—Ä—Ç—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ .env.dev
nano .env.dev
```

### –≠—Ç–∞–ø 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–¥–∞ (5 –º–∏–Ω—É—Ç)

–ò–∑–º–µ–Ω–∏—Ç—å –≤ `server.js` –∏ `database.js` –ª–æ–≥–∏–∫—É –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

### –≠—Ç–∞–ø 4: Systemd —Å–µ—Ä–≤–∏—Å (10 –º–∏–Ω—É—Ç)

```bash
# –°–æ–∑–¥–∞–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º dev —Å–µ—Ä–≤–∏—Å
sudo cp delivery-app.service /etc/systemd/system/delivery-app-dev.service
sudo nano /etc/systemd/system/delivery-app-dev.service
sudo systemctl daemon-reload
sudo systemctl enable delivery-app-dev
sudo systemctl start delivery-app-dev
```

### –≠—Ç–∞–ø 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (5 –º–∏–Ω—É—Ç)

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±–∞ —Å–µ—Ä–≤–µ—Ä–∞
curl http://localhost:3000/health  # prod
curl http://localhost:3001/health  # dev
```

**–ò–¢–û–ì–û: 35 –º–∏–Ω—É—Ç –º–∞–∫—Å–∏–º—É–º**

## üß™ –°–ò–°–¢–ï–ú–ê –ê–í–¢–û–¢–ï–°–¢–û–í (–¥–ª—è –ª—é–±–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞)

### –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã (test/basic-tests.js)

```javascript
const fetch = require('node-fetch');

class DeliveryAppTester {
    constructor(baseUrl) {
        this.baseUrl = baseUrl;
        this.results = [];
    }

    async test(name, testFn) {
        try {
            console.log(`üß™ ${name}...`);
            await testFn();
            console.log(`‚úÖ ${name} - –ü–†–û–ô–î–ï–ù`);
            this.results.push({ name, status: 'PASS' });
        } catch (error) {
            console.log(`‚ùå ${name} - –û–®–ò–ë–ö–ê: ${error.message}`);
            this.results.push({ name, status: 'FAIL', error: error.message });
        }
    }

    async runAllTests() {
        console.log(`\nüöÄ –ó–ê–ü–£–°–ö –¢–ï–°–¢–û–í –î–õ–Ø ${this.baseUrl}\n`);

        await this.test('Health Endpoint', async () => {
            const response = await fetch(`${this.baseUrl}/health`);
            if (response.status !== 200) throw new Error(`Status: ${response.status}`);
            
            const data = await response.json();
            if (!data.status || data.status !== 'ok') {
                throw new Error('Health check failed');
            }
        });

        await this.test('Products API', async () => {
            const response = await fetch(`${this.baseUrl}/products`);
            if (response.status !== 200) throw new Error(`Status: ${response.status}`);
            
            const data = await response.json();
            if (!data.products || !Array.isArray(data.products)) {
                throw new Error('Invalid products response');
            }
        });

        await this.test('Categories API', async () => {
            const response = await fetch(`${this.baseUrl}/products/categories`);
            if (response.status !== 200) throw new Error(`Status: ${response.status}`);
        });

        await this.test('Admin Panel Access', async () => {
            const response = await fetch(`${this.baseUrl}/admin`);
            if (response.status !== 200) throw new Error(`Status: ${response.status}`);
        });

        await this.test('Mini App Access', async () => {
            const response = await fetch(`${this.baseUrl}/app`);
            if (response.status !== 200) throw new Error(`Status: ${response.status}`);
        });

        await this.test('Security Headers', async () => {
            const response = await fetch(`${this.baseUrl}/health`);
            const headers = response.headers;
            
            if (!headers.get('x-content-type-options')) {
                throw new Error('Missing X-Content-Type-Options header');
            }
        });

        this.printResults();
        return this.results.filter(r => r.status === 'FAIL').length === 0;
    }

    printResults() {
        console.log('\nüìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–û–í:');
        console.log('='.repeat(50));
        
        const passed = this.results.filter(r => r.status === 'PASS').length;
        const failed = this.results.filter(r => r.status === 'FAIL').length;
        
        console.log(`‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ: ${passed}`);
        console.log(`‚ùå –ü—Ä–æ–≤–∞–ª–µ–Ω–æ: ${failed}`);
        console.log(`üìà –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—Ö–∞: ${Math.round(passed / this.results.length * 100)}%`);
        
        if (failed > 0) {
            console.log('\n‚ùå –ü–†–û–í–ê–õ–ò–í–®–ò–ï–°–Ø –¢–ï–°–¢–´:');
            this.results
                .filter(r => r.status === 'FAIL')
                .forEach(r => console.log(`  - ${r.name}: ${r.error}`));
        }
    }
}

// –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
async function runTests() {
    const env = process.env.NODE_ENV || 'production';
    const port = env === 'development' ? 3001 : 3000;
    const baseUrl = `http://localhost:${port}`;
    
    const tester = new DeliveryAppTester(baseUrl);
    const success = await tester.runAllTests();
    
    process.exit(success ? 0 : 1);
}

runTests();
```

### –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (test/security-tests.js)

```javascript
const fetch = require('node-fetch');

async function securityTests(baseUrl) {
    console.log('\nüõ°Ô∏è –¢–ï–°–¢–´ –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò\n');

    // –¢–µ—Å—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –±–æ—Ç–æ–≤
    try {
        const botPaths = ['/wp-admin/', '/xmlrpc.php', '/.env'];
        for (const path of botPaths) {
            const response = await fetch(`${baseUrl}${path}`);
            if (response.status === 200) {
                throw new Error(`Bot path ${path} not blocked`);
            }
        }
        console.log('‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –±–æ—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç');
    } catch (error) {
        console.log(`‚ùå –ó–∞—â–∏—Ç–∞ –æ—Ç –±–æ—Ç–æ–≤: ${error.message}`);
    }

    // –¢–µ—Å—Ç rate limiting
    try {
        const requests = Array(10).fill().map(() => fetch(`${baseUrl}/health`));
        await Promise.all(requests);
        console.log('‚úÖ Rate limiting —Ç–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω');
    } catch (error) {
        console.log(`‚ùå Rate limiting: ${error.message}`);
    }

    // –¢–µ—Å—Ç HTTPS redirect (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
    console.log('‚úÖ –¢–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã');
}

module.exports = securityTests;
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ package.json

```json
{
  "scripts": {
    "test": "node test/basic-tests.js",
    "test:security": "node test/security-tests.js",
    "test:dev": "NODE_ENV=development node test/basic-tests.js",
    "test:all": "npm run test && npm run test:security",
    "test:both-envs": "npm run test:dev && npm run test"
  },
  "devDependencies": {
    "jest": "^29.0.0",
    "supertest": "^6.3.0"
  }
}
```

## üîÑ WORKFLOW –° –ê–í–¢–û–¢–ï–°–¢–ê–ú–ò

### –ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –¥–µ–ø–ª–æ–µ–º:

```bash
# 1. –¢–µ—Å—Ç—ã –Ω–∞ dev –æ–∫—Ä—É–∂–µ–Ω–∏–∏
cd /home/enclude/delivery-app-dev
npm run test:dev

# 2. –ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ - –¥–µ–ø–ª–æ–π –≤ –ø—Ä–æ–¥–∞–∫—à–Ω
cd /home/enclude/delivery-app
git pull origin main
npm run test

# 3. –ï—Å–ª–∏ prod —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ - –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
sudo systemctl restart delivery-app
```

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ cron:

```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤ crontab: crontab -e
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç
*/15 * * * * cd /home/enclude/delivery-app && npm run test > /var/log/delivery-tests.log 2>&1
```

## üéâ –§–ò–ù–ê–õ–¨–ù–ê–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø

**–ù–∞—á–Ω–∏—Ç–µ —Å –í–∞—Ä–∏–∞–Ω—Ç–∞ 3 (Minimal)**. –û–Ω –¥–∞—Å—Ç –≤–∞–º:

1. ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—É—Ä–æ–≤ –∑–∞ 15 –º–∏–Ω—É—Ç
2. ‚úÖ –ü—Ä–æ—Å—Ç—É—é —Å–∏—Å—Ç–µ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è  
3. ‚úÖ –£–¥–æ–±–Ω—É—é —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∫—É —Ñ–∏—á–µ–π
4. ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —ç–≤–æ–ª—é—Ü–∏–∏ –≤ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã

**–ö–æ–≥–¥–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ –í–∞—Ä–∏–∞–Ω—Ç—É 1 –∏–ª–∏ 2:**
- –ö–æ–º–∞–Ω–¥–∞ –≤—ã—Ä–æ—Å–ª–∞ –¥–æ 3+ —á–µ–ª–æ–≤–µ–∫
- –ù—É–∂–Ω—ã –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ —Ç–µ—Å—Ç—ã
- –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π

**–í–∞—à–∞ —Ç–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –í–∞—Ä–∏–∞–Ω—Ç–∞ 3!** 